"use strict";(()=>{$.extend(!0,systemDictionary,{lcount:{en:"Groups",de:"Gruppen",ru:"\u0413\u0440\u0443\u043F\u043F\u044B",pt:"Grupos",nl:"Groepen",fr:"Groupes",it:"Gruppi",es:"Grupos",pl:"Grupy",uk:"\u0413\u0440\u0443\u043F\u0438","zh-cn":"\u7EC4"},maxicon:{en:"Icon size",de:"Icongr\xF6\xDFe",ru:"\u0420\u0430\u0437\u043C\u0435\u0440 \u0438\u043A\u043E\u043D\u044B",pt:"Tamanho do \xEDcone",nl:"Pictogramgrootte",fr:"Taille de l'ic\xF4ne",it:"Dimensione icona",es:"Tama\xF1o del icono",pl:"Rozmiar ikon",uk:"\u0420\u043E\u0437\u043C\u0456\u0440 \u0456\u043A\u043E\u043D\u0438","zh-cn":"\u56FE\u6807\u5927\u5C0F"},showresult:{en:"Display result",de:"Anzeige Ergebnis",ru:"\u0420\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442",pt:"Resultado da exposi\xE7\xE3o",nl:"Resultaat tonen",fr:"Afficher le r\xE9sultat",it:"Visualizzazione del risultato",es:"Resultado de visualizaci\xF3n",pl:"Wynik wy\u015Bwietlania",uk:"\u0420\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u0438 \u043F\u043E\u0448\u0443\u043A\u0443","zh-cn":"\u663E\u793A\u7ED3\u679C"},showabbreviation:{en:"Display abbreviation",de:"Abk\xFCrzung anzeigen",ru:"\u041E\u0442\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 \u0430\u0431\u0431\u0440\u0435\u0432\u0438\u0430\u0442\u0443\u0440\u044B",pt:"Abreviatura de exibi\xE7\xE3o",nl:"Afkorting weergeven",fr:"Afficher l'abr\xE9viation",it:"Visualizzazione abbreviazione",es:"Pantalla abreviatura",pl:"Poka\u017C skr\xF3t",uk:"\u0420\u043E\u0437\u0448\u0438\u0440\u0435\u043D\u043D\u044F \u0435\u043A\u0440\u0430\u043D\u0443","zh-cn":"\u663E\u793A\u7F29\u7565\u8BED"},showweekday:{en:"Display weekday",de:"Anzeige Wochentag",ru:"\u0414\u0438\u0441\u043F\u043B\u0435\u0439",pt:"Exibir dia da semana",nl:"Weekdag weergeven",fr:"Affichage en semaine",it:"Visualizza giorno della settimana",es:"Mostrar semanario",pl:"Wy\u015Bwietl dzie\u0144 tygodnia",uk:"\u0414\u0435\u043D\u044C \u0432\u0456\u0434\u043A\u0440\u0438\u0442\u0438\u0445 \u0434\u0432\u0435\u0440\u0435\u0439","zh-cn":"\u663E\u793A\u5DE5\u4F5C\u65E5"},group_leagues:{en:"Group",de:"Gruppe",ru:"\u0413\u0440\u0443\u043F\u043F\u0430",pt:"Grupo",nl:"Groep",fr:"Groupe",it:"Gruppo",es:"Grupo",pl:"Grupa",uk:"\u0413\u0440\u0443\u043F\u0430","zh-cn":"\u7EC4"},"oid-allmatches":{en:"ID allmatches",de:"ID allmatches",ru:"ID allmatches",pt:"ID allmatches",nl:"ID allmatches",fr:"NUM\xC9RO allmatches",it:"ID allmatches",es:"ID allmatches",pl:"ID allmatches",uk:"\u0406\u041C'\u042F allmatches","zh-cn":"\u8EAB\u4EFD\u8BC1 allmatches"},"oid-currgameday":{en:"ID currgameday",de:"ID currgameday",ru:"ID currgameday",pt:"ID currgameday",nl:"ID currgameday",fr:"NUM\xC9RO currgameday",it:"ID currgameday",es:"ID currgameday",pl:"ID currgameday",uk:"\u0406\u041C'\u042F currgameday","zh-cn":"\u8EAB\u4EFD\u8BC1 currgameday"},showgameday:{en:"Gameday",de:"Spieltag",ru:"Gameday",pt:"Gameday",nl:"Speldag",fr:"Jour de jeu",it:"Giorno di gioco",es:"Juego",pl:"Gameday",uk:"\u0414\u0435\u043D\u044C \u043D\u0430\u0440\u043E\u0434\u0436\u0435\u043D\u043D\u044F","zh-cn":"\u6E38\u620F\u65E5"},showgamedaycount:{en:"Number of match days",de:"Anzahl der Spieltage",ru:"\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u0434\u043D\u0435\u0439 \u043C\u0430\u0442\u0447\u0430",pt:"N\xFAmero de dias de jogo",nl:"Aantal wedstrijddagen",fr:"Nombre de jours de match",it:"Numero di giorni di partita",es:"N\xFAmero de d\xEDas de partido",pl:"Liczba dni meczu",uk:"\u041A\u0456\u043B\u044C\u043A\u0456\u0441\u0442\u044C \u0434\u043D\u0456\u0432 \u043C\u0430\u0442\u0447\u0443","zh-cn":"\u6BD4\u8D5B\u5929\u6570"},shortname:{en:"Short name",de:"Kurzbezeichnung",ru:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435",pt:"Nome curto",nl:"Korte naam",fr:"Nom abr\xE9g\xE9",it:"Nome breve",es:"Nombre corto",pl:"Nazwa skr\xF3cona",uk:"\u041A\u043E\u0440\u043E\u0442\u043A\u0430 \u043D\u0430\u0437\u0432\u0430","zh-cn":"\u7B80\u79F0"},onlylogo:{en:"only Logo",de:"nur Logo",ru:"\u0442\u043E\u043B\u044C\u043A\u043E \u041B\u043E\u0433\u043E",pt:"s\xF3 Logotipo",nl:"alleen logo",fr:"logo unique",it:"solo Logo",es:"s\xF3lo Logo",pl:"tylko Logo",uk:"\u043B\u043E\u0433\u043E\u0442\u0438\u043F","zh-cn":"\u53EA\u6709\u65E5\u5FD7"},abbreviation:{en:"Abbreviation",de:"Abk\xFCrzung",ru:"\u0421\u043E\u043A\u0440\u0430\u0449\u0435\u043D\u0438\u044F",pt:"Abrevia\xE7\xE3o",nl:"Afkorting",fr:"Abr\xE9viation",it:"Abbreviazione",es:"Abreviatura",pl:"Skr\xF3t",uk:"\u0410\u0431\u0431\u0440\u0435\u0432\u0456\u0430\u0442\u0443\u0440\u0430","zh-cn":"\u7F29\u7565\u8BED"},filter:{en:"Filter",de:"Filter",ru:"\u0424\u0438\u043B\u044C\u0442\u0440",pt:"Filtro",nl:"Filter",fr:"Filtre",it:"Filtro",es:"Filtro",pl:"Filtr",uk:"\u0424\u0456\u043B\u044C\u0442\u0440\u0438","zh-cn":"\u8FC7\u6EE4\u5668"},highlight:{en:"Highlight",de:"Hervorheben",ru:"\u041E\u0441\u043D\u043E\u0432\u043D\u043E\u0439 \u043C\u043E\u043C\u0435\u043D\u0442",pt:"Destaque",nl:"Oplichten",fr:"Mettre en \xE9vidence",it:"In evidenza",es:"Highlight",pl:"Pod\u015Bwietlenie",uk:"\u041F\u0456\u0434\u0441\u0432\u0456\u0447\u0443\u0432\u0430\u043D\u043D\u044F","zh-cn":"\u7A81\u51FA\u663E\u793A"},showtrend:{en:"Show trend",de:"Trend anzeigen",ru:"\u0422\u0435\u043D\u0434\u0435\u043D\u0446\u0438\u044F",pt:"Mostrar tend\xEAncia",nl:"Trend tonen",fr:"Afficher la tendance",it:"Mostra trend",es:"Mostrar tendencia",pl:"Poka\u017C trend",uk:"\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u0438 \u0442\u0440\u0435\u043D\u0434","zh-cn":"\u663E\u793A\u8D8B\u52BF"},mode:{en:"Mode",de:"Modus",ru:"\u0420\u0435\u0436\u0438\u043C",pt:"Modo",nl:"Modus",fr:"Mode",it:"Modalit\xE0",es:"Modo",pl:"Tryb",uk:"\u0420\u0435\u0436\u0438\u043C\u0438","zh-cn":"\u6A21\u5F0F"},mode_binding:{en:"Mode (Binding)",de:"Modus (Binding)",ru:"\u0420\u0435\u0436\u0438\u043C (Binding)",pt:"Modo (Binding)",nl:"Modus (Binding)",fr:"Mode (Binding)",it:"Modalit\xE0 (Binding)",es:"Modo (Binding)",pl:"Tryb (Binding)",uk:"\u0420\u0435\u0436\u0438\u043C\u0438 (Binding)","zh-cn":"\u6A21\u5F0F (Binding)"},group_icons:{en:"Trend icons",de:"Trend icons",ru:"\u0418\u043A\u043E\u043D\u044B \u0442\u0440\u0435\u043D\u0434\u0430",pt:"\xCDcones de tend\xEAncia",nl:"Trendpictogrammen",fr:"Ic\xF4nes de tendance",it:"Icone di tendenza",es:"Iconos de tendencia",pl:"Ikony trendu",uk:"\u041C\u043E\u0434\u043D\u0456 \u0456\u043A\u043E\u043D\u0438","zh-cn":"\u8D8B\u52BF\u56FE\u6807"},iconup:{en:"Trend upward",de:"Trend nach oben",ru:"\u041E\u0442\u043A\u043B\u043E\u043D\u0435\u043D\u0438\u0435 \u0432\u0432\u0435\u0440\u0445",pt:"Tend\xEAncia para cima",nl:"Trend omhoog",fr:"Tendance \xE0 la hausse",it:"Tendenza verso l'alto",es:"Tendencia hacia arriba",pl:"Trend w g\xF3r\u0119",uk:"\u0422\u0435\u043D\u0434\u0435\u043D\u0446\u0456\u0457","zh-cn":"\u4E0A\u5347\u8D8B\u52BF"},icondn:{en:"Downward trend",de:"Abw\xE4rtstrend",ru:"\u0412\u043D\u0438\u0437\u0443",pt:"Tend\xEAncia para baixo",nl:"Dalende trend",fr:"Tendances \xE0 la baisse",it:"Tendenza verso il basso",es:"Tendencia descendente",pl:"Tendencja spadkowa",uk:"\u0412\u0430\u0436\u043A\u0438\u0439 \u0442\u0440\u0435\u043D\u0434","zh-cn":"\u5411\u4E0B\u8D8B\u52BF"},iconst:{en:"Trend unchanged",de:"Trend unver\xE4ndert",ru:"\u0422\u0440\u0435\u043D\u0434 \u0431\u0435\u0437 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0439",pt:"Tend\xEAncia inalterada",nl:"Ontwikkeling ongewijzigd",fr:"\xC9volution inchang\xE9e",it:"Tendenze invariate",es:"Tendencia sin cambios",pl:"Trend bez zmian",uk:"\u0422\u0435\u043D\u0434\u0435\u043D\u0446\u0456\u0457 \u0431\u0435\u0437 \u0437\u043C\u0456\u043D","zh-cn":"\u8D8B\u52BF\u4E0D\u53D8"},lastgamecount:{en:"Last matchday",de:"Letzter Spieltag",ru:"\u041F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0439 \u0434\u0435\u043D\u044C \u043C\u0430\u0442\u0447\u0430",pt:"\xDAltimo dia do jogo",nl:"Laatste wedstrijddag",fr:"Dernier jour de rencontre",it:"Ultimo giorno di partita",es:"\xDAltimo partido",pl:"Ostatni mecz",uk:"\u041E\u0441\u0442\u0430\u043D\u043D\u0456\u0439 \u0437\u0431\u0456\u0433","zh-cn":"\u4E0A\u4E00\u4E2A\u5339\u914D\u65E5"},highlightontop:{en:"Highlight at the beginning",de:"Highlight am Anfang",ru:"\u041E\u0441\u043D\u043E\u0432\u043D\u043E\u0439 \u043C\u043E\u043C\u0435\u043D\u0442 \u0432 \u043D\u0430\u0447\u0430\u043B\u0435",pt:"Destaque no in\xEDcio",nl:"Oplichten bij het begin",fr:"Mettre en \xE9vidence au d\xE9but",it:"In evidenza all'inizio",es:"Destacar al principio",pl:"Pod\u015Bwietl na pocz\u0105tku",uk:"\u0412\u0438\u0434\u0456\u043B\u0438\u0442\u0438 \u043D\u0430 \u043F\u043E\u0447\u0430\u0442\u043A\u0443","zh-cn":"\u5F00\u5934\u7A81\u51FA"},maxcount:{en:"Maximum number",de:"Maximale Anzahl",ru:"\u041C\u0430\u043A\u0441\u0438\u043C\u0430\u043B\u044C\u043D\u043E\u0435 \u0447\u0438\u0441\u043B\u043E",pt:"N\xFAmero m\xE1ximo",nl:"Maximumaantal",fr:"Nombre maximal",it:"Numero massimo",es:"N\xFAmero m\xE1ximo",pl:"Maksymalna liczba",uk:"\u041C\u0430\u043A\u0441\u0438\u043C\u0430\u043B\u044C\u043D\u0430 \u043A\u0456\u043B\u044C\u043A\u0456\u0441\u0442\u044C","zh-cn":"\u6700\u5927\u6570\u76EE"},sort:{en:"Sorted",de:"Sortiert",ru:"\u0421\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u044B\u0435",pt:"Classifica\xE7\xE3o",nl:"Gesorteerd",fr:"Tri\xE9s",it:"Ordinato",es:"Clasificado",pl:"Sortowane",uk:"\u0421\u043E\u0440\u0442\u0443\u0432\u0430\u0442\u0438","zh-cn":"\u6392\u5E8F"},showonlyhighlight:{en:"Show highlights only",de:"Nur Highlights anzeigen",ru:"\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u0442\u043E\u043B\u044C\u043A\u043E",pt:"Mostrar apenas destaques",nl:"Alleen hoogtepunten tonen",fr:"Afficher uniquement les faits saillants",it:"Mostra solo i punti salienti",es:"Show highlights s\xF3lo",pl:"Poka\u017C tylko pod\u015Bwietlenia",uk:"\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u0438 \u0442\u0456\u043B\u044C\u043A\u0438","zh-cn":"\u53EA\u663E\u793A\u7A81\u51FA\u663E\u793A"},"oid-goalgetters":{en:"ID goalgetters",de:"ID goalgetters",ru:"ID goalgetters",pt:"ID goalgetters",nl:"ID goalgetters",fr:"NUM\xC9RO goalgetters",it:"ID goalgetters",es:"ID goalgetters",pl:"ID goalgetters",uk:"\u0406\u041C'\u042F goalgetters","zh-cn":"\u8EAB\u4EFD\u8BC1 goalgetters"},xxx:{}});vis.binds.openligadb={version:"1.4.0",showVersion:function(){vis.binds.openligadb.version&&(console.log(`Version openligadb: ${vis.binds.openligadb.version}`),vis.binds.openligadb.version=null)},pivottable2:{createWidget:function(n,t,e,r){let c=$(`#${n}`);if(!c.length)return setTimeout(function(){vis.binds.openligadb.pivottable2.createWidget(n,t,e,r)},100);let s=e["oid-allmatches"]?JSON.parse(vis.states.attr(`${e["oid-allmatches"]}.val`)):[],b=e["oid-currgameday"]?vis.states.attr(`${e["oid-currgameday"]}.val`):1;b=b||1;let g=e.maxicon||25,d=e.shortname||!1,T=e.onlylogo||!1,O=e.highlight||"",v=vis.binds.openligadb.prepareFilter(O),N=e.sort||"table",y=e.highlightontop||!1;function D(){vis.binds.openligadb.pivottable2.createWidget(n,t,e,r)}if(e["oid-allmatches"]&&e["oid-currgameday"]&&(vis.editMode||vis.binds.openligadb.bindStates2(c,[e["oid-allmatches"],e["oid-currgameday"]],D)),!s)return;let m=s.reduce(function(h,p){let k;Object.prototype.hasOwnProperty.call(h,p.team1.teamName)?k=h[p.team1.teamName]:k={teamName:p.team1.teamName,shortName:p.team1.shortName,teamIconUrl:p.team1.teamIconUrl,gamedays:[]};let w=vis.binds.openligadb.getResult(p.matchResults),x=Object.prototype.hasOwnProperty.call(w,"pointsTeam1")?w.pointsTeam1:"-",o=Object.prototype.hasOwnProperty.call(w,"pointsTeam2")?w.pointsTeam2:"-";p.group.groupOrderID>b&&(x="-",o="-");let u={matchDateTime:p.matchDateTime,result:`${x}:${o}`,groupName:p.group.groupName,groupOrderID:p.group.groupOrderID,teamName:p.team2.teamName,shortName:p.team2.shortName,teamIconUrl:p.team2.teamIconUrl};return k.gamedays[p.team2.teamName]=u,h[p.team1.teamName]=k,h},[]),f=vis.binds.openligadb.table4.calcTable(s,1,b,b),i=[];for(let h in f)i.push(f[h]);if(N=="table"&&(f=i.sort(function(h,p){return h.points>p.points?-1:p.points>h.points||h.goalDiff<p.goalDiff?1:h.goalDiff>p.goalDiff?-1:0})),N=="name"&&(f=i.sort(function(h,p){let k=d?h.shortName:h.teamName,w=d?p.shortName:p.teamName;return k>w?1:k<w?-1:0})),y&&v.map(h=>h.filter).join(";").trim()!=""){let h=v.map(p=>p.filter).join(";").split(";");h=h.reverse();for(let p=0;p<h.length;p++){let k=f.findIndex(function(w){return w.teamName.toLowerCase().indexOf(h[p].toLowerCase())>=0});k>0&&f.splice(0,0,f.splice(k,1)[0])}}let a="";a+=`<style> 
`,a+=`#${n} .oldb-icon {
`,a+=`   max-height: ${g}px; 
`,a+=`   max-width: ${g}px; 
`,a+=`} 
`,a+=`#${n} .oldb-center {
`,a+=`   text-align: center;
`,a+=`} 
`,a+=`#${n} .oldb-tt td{
`,a+=`   white-space: nowrap;
`,a+=`} 
`,a+=`#${n} .oldb-full {
`,a+=`   width: 100%;
`,a+=`} 
`,a+=`</style> 
`,a+='<table class="oldb-tt">',a+="        <tr>",a+='           <th class="oldb-center oldb-rank">#</th><th></th><th></th>',f.forEach(function(h){a+='           <th class="oldb-center oldb-tdicon">',a+=`              <img class="oldb-icon" src="${h.teamIconUrl}">`,a+="           </th>"}),a+='           <th class="oldb-center oldb-goaldiff">Diff</th><th class="oldb-center oldb-points">Punkte</th>',a+="        </tr>";let l;f.forEach(function(h){l=m[h.teamName];let p=d?h.shortName:h.teamName;vis.binds.openligadb.checkHighlite(h.teamName,v.map(k=>k.filter).join(";"))&&(p=`<b class="favorite ${vis.binds.openligadb.getCSSClass(p,v)}">${p}</b>`),a+="        <tr>",a+='            <td class="oldb-center oldb-rank">',a+=h.ranking[h.ranking.length-1],a+="            </td>",a+='           <td class="oldb-center oldb-tdicon">',a+=`              <img class="oldb-icon" src="${h.teamIconUrl}">`,a+="           </td>",T||(a+=`           <td class="oldb-teamname oldb-full">${p}</td>`),f.forEach(function(k){if(h.teamName==k.teamName){a+='           <td class=""></td>';return}let w=l.gamedays[k.teamName]&&l.gamedays[k.teamName].result||"-";a+=`           <td class="oldb-center oldb-result">${w}</td>`}),a+=`           <td class="oldb-center oldb-goaldiff">${h.goalDiff}</td>`,a+=`           <td class="oldb-center oldb-points">${h.points}</td>`,a+="        </tr>"}),a+="</table>",$(`#${n}`).html(a)}},goalgetters2:{createWidget:function(n,t,e,r){let c=$(`#${n}`);if(!c.length)return setTimeout(function(){vis.binds.openligadb.goalgetters2.createWidget(n,t,e,r)},100);let s=e["oid-goalgetters"]?JSON.parse(vis.states.attr(`${e["oid-goalgetters"]}.val`)):[],b=e.maxcount||99999,g=e.sort||"goal",d=e.highlight||"",T=e.showonlyhighlight||!1;function O(){vis.binds.openligadb.goalgetters2.createWidget(n,t,e,r)}e["oid-goalgetters"]&&(vis.editMode||vis.binds.openligadb.bindStates2(c,[e["oid-goalgetters"]],O)),s=this.setName(s),g=="goal"&&(s=s.sort(function(y,D){return D.goalCount-y.goalCount})),g=="name"&&(s=s.sort(function(y,D){return`${y.lastname} ${y.prename}`.localeCompare(`${D.lastname} ${D.prename}`)}));let v="";v+=`<style> 
`,v+=`#${n} .oldb-tt td{
`,v+=`   white-space: nowrap;
`,v+=`} 
`,v+=`#${n} .oldb-left {
`,v+=`   text-align: left;
`,v+=`} 
`,v+=`</style> 
`,v+='<table class="oldb-gg">',v+="        <tr>",v+='           <th class="oldb-left">Name</td>',v+='           <th class="oldb-left">Tore</td>',v+="        </tr>";let N=0;s.forEach(function(y){if(N<b){let D="";D+=y.lastname,y.prename?D+=`, ${y.prename}`:D+=y.prename;let m=vis.binds.openligadb.checkHighlite(D,d);m&&(D=`<b>${D}</b>`),(!T||T&&m)&&(v+="        <tr>",v+=`           <td class="oldb-left">${D}</td>`,v+=`           <td class="oldb-left">${y.goalCount}</td>`,v+="        </tr>",N++)}}),v+="</table>            ",$(`#${n}`).html(v)},setName:function(n){let t;return n.forEach(function(e){let r=/(.+), ?(.+)/g,c=/(.+)\. ?(.+)/g,s=e.goalGetterName.trim();if(e.ok=!1,t=r.exec(s),t&&t[1]&&t[2]){e.prename=t[2],e.lastname=t[1],e.ok=!0;return}if(t=c.exec(s),t&&t[1]&&t[2]){e.lastname=t[2],e.prename=`${t[1]}.`,e.ok=!0;return}if(t=s.split(" "),t&&t.length>1){e.lastname=t.pop(),e.prename=t.join(" "),e.ok=!0;return}t&&t.length==1&&(e.lastname=t.pop(),e.prename="",e.ok=!0)}),n}},favgames3:{createWidget:function(n,t,e,r){let c=$(`#${n}`);if(!c.length)return setTimeout(function(){vis.binds.openligadb.favgames3.createWidget(n,t,e,r)},100);let s=[],b=e.showabbreviation||!1,g=e.onlylogo||!1,d=e.showweekday||!1,T=e.showresult||!1,O=e.maxicon||25,v="",N=[];for(let a=1;a<=e.lcount;a++){let l=e[`oid-allmatches${a}`]?JSON.parse(vis.states.attr(`${e[`oid-allmatches${a}`]}.val`)):[],h=e[`oid-currgameday${a}`]?vis.states.attr(`${e[`oid-currgameday${a}`]}.val`):1;e[`oid-allmatches${a}`]&&N.push(e[`oid-allmatches${a}`]),e[`oid-currgameday${a}`]&&N.push(e[`oid-currgameday${a}`]);let p=e[`showgameday${a}`]||"";vis.editMode&&/{.*}/gm.test(p)&&(p=""),p==0&&(p=""),p=p||h||"";let k=e[`showgamedaycount${a}`]||9999;k==0&&(k=9999);let w=e[`abbreviation${a}`]||"",x=e[`shortname${a}`]||!1,o=e[`filter${a}`]||"",u=vis.binds.openligadb.prepareFilter(o);s=s.concat(this.filterFavGames(l,p,k,h,u,x,w)),o==""&&(v+=`group${a} `)}function y(){vis.binds.openligadb.favgames3.createWidget(n,t,e,r)}N.length>0&&(vis.editMode||vis.binds.openligadb.bindStates2(c,N,y)),s=this.sortFavGames(s);let D={weekday:"short"},m={month:"2-digit",day:"2-digit"},f={hour:"2-digit",minute:"2-digit"},i="";i+=`<style> 
`,i+=`#${n} .oldb-icon {
`,i+=`   max-height: ${O}px; 
`,i+=`   max-width: ${O}px; 
`,i+=`} 
`,i+=`#${n} .oldb-tdicon {
`,i+=`   width: ${O}px; 
`,i+=`} 
`,i+=`#${n} .oldb-tt {
`,i+=`   width: 100%;
`,i+=`} 
`,i+=`#${n} .oldb-tt td{
`,i+=`   white-space: nowrap;
`,i+=`} 
`,i+=`#${n} .oldb-full {
`,i+=`   width: 50%;
`,i+=`} 
`,i+=`#${n} .oldb-center {
`,i+=`   text-align: center;
`,i+=`} 
`,i+=`#${n} .oldb-right {
`,i+=`   text-align: right;
`,i+=`} 
`,i+=`#${n} .oldb-left {
`,i+=`   text-align: left;
`,i+=`} 
`,i+=`#${n} .oldb-datetime {
`,i+=`       font-weight: bold;
`,i+=`} 
`,i+=`</style> 
`,i+='<table class="oldb-tt">',s.forEach(function(a){let l=a.shortname?a.team1.shortName:a.team1.teamName,h=a.shortname?a.team2.shortName:a.team2.teamName;vis.binds.openligadb.checkHighlite(l,a.filter.map(u=>u.filter).join(";"))&&(l=`<b class="favorite ${vis.binds.openligadb.getCSSClass(l,a.filter)}">${l}</b>`),vis.binds.openligadb.checkHighlite(h,a.filter.map(u=>u.filter).join(";"))&&(h=`<b class="favorite ${vis.binds.openligadb.getCSSClass(h,a.filter)}">${h}</b>`);let p=vis.binds.openligadb.getResult(a.matchResults),k=Object.prototype.hasOwnProperty.call(p,"pointsTeam1")?p.pointsTeam1:"-",w=Object.prototype.hasOwnProperty.call(p,"pointsTeam2")?p.pointsTeam2:"-",x=new Date,o=vis.binds.openligadb.getDateFromJSON(a.matchDateTime);vis.binds.openligadb.compareDate(x,o)?i+='        <tr class="todaygame">':i+="        <tr>",d&&(i+=`           <td class="oldb-left">${vis.binds.openligadb.getDateFromJSON(a.matchDateTime).toLocaleString(vis.language,D)}</td>`),i+=`           <td class="oldb-left">${vis.binds.openligadb.getDateFromJSON(a.matchDateTime).toLocaleString(vis.language,m)}</td>`,i+=`           <td class="oldb-left">${vis.binds.openligadb.getDateFromJSON(a.matchDateTime).toLocaleString(vis.language,f)}</td>`,b&&(i+=`           <td class="oldb-left">${a.abbreviation}</td>`),i+='           <td class="oldb-center oldb-tdicon">',i+=`              <img class="oldb-icon" src="${a.team1.teamIconUrl}">`,i+="           </td>",g||(i+=`           <td class="oldb-full">${l}</td>`),T&&(i+=`           <td class="oldb-left">${k}</td>`),i+='           <td class="oldb-left">:</td>',T&&(i+=`           <td class="oldb-left">${w}</td>`),i+='           <td class="oldb-center oldb-tdicon">',i+=`              <img class="oldb-left oldb-icon" src="${a.team2.teamIconUrl}">`,i+="           </td>",g||(i+=`           <td class="oldb-full">${h}</td>`),i+="        </tr>"}),v!=""&&(i+=`<tr><td>No filter set for: ${v}</td></tr>`),i+="</table>            ",$(`#${n}`).html(i)},filterFavGames:function(n,t,e,r,c,s,b){return Array.isArray(n)?(t=parseInt(t),e=parseInt(e),r=parseInt(r),n.reduce(function(g,d){let T;return d.abbreviation=b,t>0&&d.group.groupOrderID>=t&&d.group.groupOrderID<t+e&&(T=d),t<0&&d.group.groupOrderID>=r+t&&d.group.groupOrderID<r+t+e&&(T=d),d.filter=c,d.shortname=s,T&&(vis.binds.openligadb.checkHighlite(d.team1.teamName,c.map(O=>O.filter).join(";"))||vis.binds.openligadb.checkHighlite(d.team2.teamName,c.map(O=>O.filter).join(";")))&&g.push(d),g},[])):[]},sortFavGames:function(n){return n.sort(function(t,e){let r=0;return vis.binds.openligadb.getDateFromJSON(t.matchDateTime).getTime()>vis.binds.openligadb.getDateFromJSON(e.matchDateTime).getTime()&&(r=1),vis.binds.openligadb.getDateFromJSON(t.matchDateTime).getTime()<vis.binds.openligadb.getDateFromJSON(e.matchDateTime).getTime()&&(r=-1),r})}},gameday2:{createWidget:function(n,t,e,r){let c=$(`#${n}`);if(!c.length)return setTimeout(function(){vis.binds.openligadb.gameday2.createWidget(n,t,e,r)},100);let s=e["oid-allmatches"]?JSON.parse(vis.states.attr(`${e["oid-allmatches"]}.val`)):[],b=e["oid-currgameday"]?vis.states.attr(`${e["oid-currgameday"]}.val`):1,g=e.showgameday||"";vis.editMode&&/{.*}/gm.test(g)&&(g=""),g==0&&(g="");let d=e.showgamedaycount||1;d==0&&(d=1);let T=e.showweekday||!1,O=e.showgoals||!1,v=e.maxicon||25,N=e.shortname||!1,y=e.onlylogo||!1,D=e.highlight||"",m=vis.binds.openligadb.prepareFilter(D);function f(){vis.binds.openligadb.gameday2.createWidget(n,t,e,r)}e["oid-allmatches"]&&e["oid-currgameday"]&&(vis.editMode||vis.binds.openligadb.bindStates2(c,[e["oid-allmatches"],e["oid-currgameday"]],f));let i=this.filterGameDay(s,g||b||"",d,b),a=this.groupGameDay(i,N,m.map(k=>k.filter).join(";")),l="";l+=`<style> 
`,l+=`#${n} .oldb-icon {
`,l+=`   max-height: ${v}px; 
`,l+=`   max-width: ${v}px; 
`,l+=`} 
`,l+=`#${n} .oldb-tdicon {
`,l+=`   width: ${v}px; 
`,l+=`} 
`,l+=`#${n} .oldb-tt {
`,l+=`   width: 100%;
`,l+=`} 
`,l+=`#${n} .oldb-tt td{
`,l+=`   white-space: nowrap;
`,l+=`} 
`,l+=`#${n} .oldb-wrap {
`,l+=`   white-space: normal !important;
`,l+=`} 
`,l+=`#${n} .oldb-goal {
`,l+=`   white-space: nowrap;
`,l+=`   display: inline-block;
`,l+=`} 
`,l+=`#${n} .oldb-full {
`,l+=`   width: 50%;
`,l+=`} 
`,l+=`#${n} .oldb-center {
`,l+=`   text-align: center;
`,l+=`} 
`,l+=`#${n} .oldb-right {
`,l+=`   text-align: right;
`,l+=`} 
`,l+=`#${n} .oldb-left {
`,l+=`   text-align: left;
`,l+=`} 
`,l+=`#${n} .oldb-datetime {
`,l+=`       font-weight: bold;
`,l+=`} 
`,l+=`</style> 
`,l+='<table class="oldb-tt">';let h=T?{weekday:"short",month:"2-digit",day:"2-digit"}:{month:"2-digit",day:"2-digit"},p={hour:"2-digit",minute:"2-digit"};a.forEach(function(k){let w=new Date,x=vis.binds.openligadb.getDateFromJSON(k.matchDateTime),o=vis.binds.openligadb.compareDate(w,x)?"todaygameheader":"";o+=k.favorite?" favorite":"",o!=""?l+=`        <tr class="${o}">`:l+="        <tr>",l+=`           <td class="oldb-right oldb-datetime" colspan="3">${x.toLocaleString(vis.language,h)}</td>`,l+='           <td class=""></td>',l+=`           <td class="oldb-left oldb-datetime" colspan="3">${x.toLocaleString(vis.language,p)}</td>`,l+="        </tr>",k.matches.forEach(function(u){let G=vis.binds.openligadb.getDateFromJSON(u.matchDateTime),z=N?u.team1.shortName:u.team1.teamName,S=N?u.team2.shortName:u.team2.teamName;u.team1.favorite&&(z=`<b class="favorite ${vis.binds.openligadb.getCSSClass(z,m)}">${z}</b>`),u.team2.favorite&&(S=`<b class="favorite ${vis.binds.openligadb.getCSSClass(S,m)}">${S}</b>`),y&&(z="&nbsp;",S="&nbsp;");let I=vis.binds.openligadb.getResult(u.matchResults),M=Object.prototype.hasOwnProperty.call(I,"pointsTeam1")?I.pointsTeam1:"-",j=Object.prototype.hasOwnProperty.call(I,"pointsTeam2")?I.pointsTeam2:"-";vis.binds.openligadb.compareDate(w,G)?l+='        <tr class="todaygame">':l+="        <tr>",l+=`           <td class="oldb-right oldb-full">${z}</td>`,l+='           <td class="oldb-center oldb-tdicon">',l+=`              <img class="oldb-icon" src="${u.team1.teamIconUrl}">`,l+="           </td>",l+=`           <td class="oldb-center">${M}</td>`,l+='           <td class="oldb-center">:</td>',l+=`           <td class="oldb-center">${j}</td>`,l+='           <td class="oldb-center oldb-tdicon">',l+=`              <img class="oldb-center oldb-icon" src="${u.team2.teamIconUrl}">`,l+="           </td>",l+=`           <td class="oldb-left oldb-full">${S}</td>`,l+="        </tr>";let C=this.getGoals(u);O&&C!=""&&(l+="        <tr>",l+=`           <td class="oldb-center oldb-wrap" colspan="7"><small>${this.getGoals(u)}</small></td>`,l+="        </tr>")}.bind(this))}.bind(this)),l+="</table>            ",$(`#${n}`).html(l)},filterGameDay:function(n,t,e,r){return t=parseInt(t),e=parseInt(e),r=parseInt(r),n.reduce(function(c,s){return t>0&&s.group.groupOrderID>=t&&s.group.groupOrderID<t+e&&c.push(s),t<0&&s.group.groupOrderID>=r+t&&s.group.groupOrderID<r+t+e&&c.push(s),c},[])},groupGameDay:function(n,t,e){let r=[],c=n.reduce(function(s,b){let g;Object.prototype.hasOwnProperty.call(s,b.matchDateTime)?g=s[b.matchDateTime]:g={matchDateTime:b.matchDateTime,matches:[],favorite:!1};let d=t?b.team1.shortName:b.team1.teamName,T=t?b.team2.shortName:b.team2.teamName;return b.team1.favorite=!1,b.team2.favorite=!1,vis.binds.openligadb.checkHighlite(d,e)&&(b.team1.favorite=!0,g.favorite=!0),vis.binds.openligadb.checkHighlite(T,e)&&(T=`<b class="favorite">${T}</b>`,b.team2.favorite=!0,g.favorite=!0),g.matches.push(b),s[b.matchDateTime]=g,s},[]);for(let s in c)r.push(c[s]);return r},getGoals:function(n){let t="";return n.goals.forEach(function(e,r,c){let s="",b=e.goalGetterName?` ${e.goalGetterName}`:"",g=e.matchMinute?` (${e.matchMinute})`:"";s+=`${e.scoreTeam1}:${e.scoreTeam2}${b}${g}`,s+=e.isPenalty?" (Elfmeter)":"",s+=e.isOwnGoal?" (Eigentor)":"",s+=r<c.length-1?", ":"",t+=`<span class="oldb-goal">${s}</span>`}),t}},table4:{createWidget:function(n,t,e,r){let c=$(`#${n}`);if(!c.length)return setTimeout(function(){vis.binds.openligadb.table4.createWidget(n,t,e,r)},100);let s=e["oid-allmatches"]?JSON.parse(vis.states.attr(`${e["oid-allmatches"]}.val`)):[],b=e["oid-currgameday"]?vis.states.attr(`${e["oid-currgameday"]}.val`):1,g=e.showgameday||"";vis.editMode&&/{.*}/gm.test(g)&&(g=""),g==0&&(g=""),g=g||b||"";let d=e.lastgamecount||g;d==0&&(d=g);let T=e.showtrend||!1,O=e.iconup||"widgets/openligadb/img/trend_up.png",v=e.icondn||"widgets/openligadb/img/trend_dn.png",N=e.iconst||"widgets/openligadb/img/trend_st.png",y=e.mode_binding||"";e.mode="1total,2home,3away,4round1,5round2".indexOf(y)>=0&&y!=""?y:e.mode;let m=(e.mode||"1total")[0];function f(){vis.binds.openligadb.table4.createWidget(n,t,e,r)}e["oid-allmatches"]&&e["oid-currgameday"]&&(vis.editMode||vis.binds.openligadb.bindStates2(c,[e["oid-allmatches"],e["oid-currgameday"]],f));let i=this.calcTable(s,m,g,d),a=[];for(let u in i)a.push(i[u]);i=a.sort(function(u,G){return u.points>G.points?-1:G.points>u.points||u.goalDiff<G.goalDiff?1:u.goalDiff>G.goalDiff?-1:0});let l=e.maxicon||25,h=e.onlylogo||!1,p=e.shortname||!1,k=e.highlight||"",w=e.filter||"",x=vis.binds.openligadb.prepareFilter(k),o="";o+=`<style> 
`,o+=`#${n} .oldb-icon {
`,o+=`   max-height: ${l}px; 
`,o+=`   max-width: ${l}px; 
`,o+=`} 
`,o+=`#${n} .oldb-tt {
`,o+=`   width: 100%;
`,o+=`} 
`,o+=`#${n} .oldb-tt td{
`,o+=`   white-space: nowrap;
`,o+=`} 
`,o+=`#${n} .oldb-full {
`,o+=`   width: 100%;
`,o+=`} 
`,o+=`#${n} .oldb-center {
`,o+=`   text-align: center;
`,o+=`} 
`,o+=`</style> 
`,o+='<table class="oldb-tt">',o+="    <thead>",o+="    <tr >",o+='        <th class="oldb-center oldb-rank">',o+="            #",o+="        </th>",o+='        <th colspan="2" class="oldb-clubheader" style="text-align: left;">',o+="            Club",o+="        </th>",o+="",o+='        <th class="oldb-center oldb-games">',o+="            Sp",o+="        </th>",o+='        <th class="oldb-center oldb-won">',o+="            S",o+="        </th>",o+='        <th class="oldb-center oldb-draw">',o+="            U",o+="        </th>",o+='        <th class="oldb-center oldb-lost">',o+="            N",o+="        </th>",o+='        <th class="oldb-center oldb-goals">',o+="            Tore",o+="        </th>",o+='        <th class="oldb-center oldb-goaldiff">',o+="            Diff",o+="        </th>",o+='        <th class="oldb-center oldb-points">',o+="            Punkte",o+="        </th>",T&&(o+='        <th class="oldb-center oldb-trend">'),T&&(o+="            T"),T&&(o+="        </th>"),o+="    </tr>",o+="    </thead>",o+='    <tbody class="oldb-tb">',i.forEach(function(u,G){let z=p?u.shortName:u.teamName;if(!(vis.binds.openligadb.checkHighlite(z,w)||w==""))return;vis.binds.openligadb.checkHighlite(z,x.map(I=>I.filter).join(";"))&&(z=`<b class="favorite ${vis.binds.openligadb.getCSSClass(z,x)}">${z}</b>`),o+="        <tr>",o+='            <td class="oldb-center oldb-rank">',o+=G+1,o+="            </td>",o+='            <td class="oldb-center">',o+=`                <img class="oldb-icon" src="${u.teamIconUrl}">`,o+="            </td>",h||(o+='            <td class="oldb-teamname oldb-full">',o+=`                <span>${z}</span>`,o+="            </td>"),o+='            <td class="oldb-center oldb-games">',o+=u.matches,o+="            </td>",o+='            <td class="oldb-center oldb-won">',o+=u.won,o+="           </td>",o+='            <td class="oldb-center oldb-draw">',o+=u.draw,o+="            </td>",o+='            <td class="oldb-center oldb-lost">',o+=u.lost,o+="            </td>",o+='            <td class="oldb-center oldb-goals">',o+=`${u.goals}:${u.opponentGoals}`,o+="            </td>",o+='            <td class="oldb-center oldb-goaldiff">',o+=u.goalDiff,o+="            </td>",o+='            <td class="oldb-center oldb-points">',o+=`                <strong>${u.points}</strong>`,o+="            </td>";let S="";T&&(u.ranking[u.ranking.length-1]<u.ranking[u.ranking.length-2]&&(S=O),u.ranking[u.ranking.length-1]>u.ranking[u.ranking.length-2]&&(S=v),u.ranking[u.ranking.length-1]==u.ranking[u.ranking.length-2]&&(S=N)),T&&(o+='            <td class="oldb-center oldb-points">',o+=`                <img class="oldb-icon" src="${S}">`,o+="            </td>"),o+="        </tr>"}),o+="    </tbody>",o+="</table>            ",$(`#${n}`).html(o)},addRanking:function(n,t){let e=[];for(let r in n)e.push(n[r]);e=e.sort(function(r,c){return r.points>c.points?-1:c.points>r.points||r.goalDiff<c.goalDiff?1:r.goalDiff>c.goalDiff?-1:0}),e.forEach(function(r,c){n[r.teamName].ranking[t]=c+1})},calcTable:function(n,t,e,r){let c=0;if(!n)return[];let s=n.reduce(function(g,d){return Math.max(g,d.group.groupOrderID)},0),b=n.reduce((g,d)=>{d.group.groupOrderID!=c&&d.group.groupOrderID<=e&&this.addRanking(g,c),c=d.group.groupOrderID;let T=d.team1.teamName,O=d.team1.shortName,v=d.team1.teamIconUrl,N=d.team2.teamName,y=d.team2.shortName,D=d.team2.teamIconUrl,m;Object.prototype.hasOwnProperty.call(g,T)?m=g[T]:m={teamName:T,shortName:O,teamIconUrl:v,points:0,ranking:[],opponentGoals:0,goals:0,matches:0,won:0,lost:0,draw:0,goalDiff:0};let f;Object.prototype.hasOwnProperty.call(g,N)?f=g[N]:f={teamName:N,shortName:y,teamIconUrl:D,points:0,ranking:[],opponentGoals:0,goals:0,matches:0,won:0,lost:0,draw:0,goalDiff:0};let i=vis.binds.openligadb.getResult(d.matchResults);return Object.prototype.hasOwnProperty.call(i,"pointsTeam1")&&d.group.groupOrderID<=e&&d.group.groupOrderID>e-r&&(i.pointsTeam1>i.pointsTeam2&&((t==1||t==2||t==4&&d.group.groupOrderID<=s/2||t==5&&d.group.groupOrderID>s/2)&&(m.points+=3,m.opponentGoals+=i.pointsTeam2,m.goals+=i.pointsTeam1,m.matches+=1,m.won+=1,m.goalDiff=m.goals-m.opponentGoals),(t==1||t==3||t==4&&d.group.groupOrderID<=s/2||t==5&&d.group.groupOrderID>s/2)&&(f.points+=0,f.opponentGoals+=i.pointsTeam1,f.goals+=i.pointsTeam2,f.matches+=1,f.lost+=1,f.goalDiff=f.goals-f.opponentGoals)),i.pointsTeam1==i.pointsTeam2&&((t==1||t==2||t==4&&d.group.groupOrderID<=s/2||t==5&&d.group.groupOrderID>s/2)&&(m.points+=1,m.opponentGoals+=i.pointsTeam2,m.goals+=i.pointsTeam1,m.matches+=1,m.draw+=1,m.goalDiff=m.goals-m.opponentGoals),(t==1||t==3||t==4&&d.group.groupOrderID<=s/2||t==5&&d.group.groupOrderID>s/2)&&(f.points+=1,f.opponentGoals+=i.pointsTeam1,f.goals+=i.pointsTeam2,f.matches+=1,f.draw+=1,f.goalDiff=f.goals-f.opponentGoals)),i.pointsTeam1<i.pointsTeam2&&((t==1||t==2||t==4&&d.group.groupOrderID<=s/2||t==5&&d.group.groupOrderID>s/2)&&(m.points+=0,m.opponentGoals+=i.pointsTeam2,m.goals+=i.pointsTeam1,m.matches+=1,m.lost+=1,m.goalDiff=m.goals-m.opponentGoals),(t==1||t==3||t==4&&d.group.groupOrderID<=s/2||t==5&&d.group.groupOrderID>s/2)&&(f.points+=3,f.opponentGoals+=i.pointsTeam1,f.goals+=i.pointsTeam2,f.matches+=1,f.won+=1,f.goalDiff=f.goals-f.opponentGoals))),g[T]=m,g[N]=f,g},[]);return this.addRanking(b,e),b}},prepareFilter:function(n){try{return n.split(";").map(t=>{let e=/(.+)\[(.*)\]|(.+)/gm.exec(t);if(!e)return{filter:"",color:""};let r=e[1]||e[3]||"",c=e[2]||"";return{filter:r,class:c}})}catch(t){return[]}},bindStates:function(n,t,e){let r=$(n),c=r.data("bound");if(c)for(let s=0;s<c.bound.length;s++)vis.states.unbind(c.bound[s],c.change_callback);r.data("bound",null),r.data("bindHandler",null),vis.conn.gettingStates=0,vis.conn.getStates(t,function(s,b){vis.updateStates(b),vis.conn.subscribe(t);for(let g=0;g<t.length;g++)t[g]=`${t[g]}.val`,vis.states.bind(t[g],e);r.data("bound",{bound:t,change_callback:e}),r.data("bindHandler",e)}.bind({change_callback:e}))},bindStates2:function(n,t,e){let r=$(n),c=r.data("bound");if(c)for(let s=0;s<c.bound.length;s++)vis.states.unbind(c.bound[s],c.bindHandler);r.data("bound",null);for(let s=0;s<t.length;s++)t[s]=`${t[s]}.val`,vis.states.bind(t[s],e);r.data("bound",{bound:t,bindHandler:e})},checkHighlite:function(n,t,e){return e=typeof e!="undefined"?e:";",t.split(e).reduce(function(c,s){return s==""?c:c||n.toLowerCase().indexOf(s.toLowerCase())>=0},!1)},getCSSClass:function(n,t){return t.find(e=>n.toLowerCase().indexOf(e.filter.toLowerCase())>=0).class},getDateFromJSON:function(n){let t=n.split("T")[0].split("-"),e=n.split("T")[1].split(":");return new Date(t[0],t[1]-1,t[2],e[0],e[1])},getResult:function(n){return n.length==0?{}:(n=n.reduce(function(t,e){return e.resultTypeID>(t.resultTypeID||0)&&(t=e),t},{}),n)},compareDate:function(n,t){return n.getDate()==t.getDate()&&n.getMonth()==t.getMonth()&&n.getYear()==t.getYear()},checkTodayFavorite:function(n,t){if(n){let e=vis.states.attr(`${n}.val`);if(e&&e!="null"){if(!vis.subscribing.IDs.includes(n)){vis.subscribing.IDs.push(n);let c=[];c.push(n),vis.conn.gettingStates=0,vis.conn.getStates(c,function(s,b){vis.updateStates(b);let g=[];g.push(n),vis.conn.subscribe(g)})}let r=JSON.parse(e);if(r){let c=new Date;return r.reduce(function(s,b){let g=vis.binds.openligadb.getDateFromJSON(b.matchDateTime),d=vis.binds.openligadb.compareDate(c,g)&&(vis.binds.openligadb.checkHighlite(b.team1.teamName,t,",")||vis.binds.openligadb.checkHighlite(b.team2.teamName,t,","));return s||d},!1)}}else{vis.subscribing.IDs.includes(n)||vis.subscribing.IDs.push(n);let r=[];r.push(n),vis.conn.gettingStates=0,vis.conn.getStates(r,function(c,s){vis.updateStates(s);let b=[];b.push(n),vis.conn.subscribe(b)})}}return!1}};vis.binds.openligadb.showVersion();})();
//# sourceMappingURL=openligadb-dist.js.map
